; =============================================
; utils.asm - 实用函数
; =============================================

; --------------------------
; 打印字符
; 输入：AL=字符
; --------------------------
print_char:
    mov ah, 0x0E    ; BIOS显示字符功能
    int 0x10        ; 调用BIOS视频服务
    ret

; --------------------------
; 打印字符串
; 输入：SI=字符串地址(以0结尾)
; --------------------------
print_string:
    push ax
.next_char:
    lodsb           ; 加载[SI]到AL，SI++
    or al, al       ; AL=0?
    jz .done        ; 是则结束
    call print_char
    jmp .next_char
.done:
    pop ax
    ret

; --------------------------
; 软重启系统
; --------------------------
soft_reboot:
    ; 通过键盘控制器重启
    mov al, 0xFE
    out 0x64, al
    ret